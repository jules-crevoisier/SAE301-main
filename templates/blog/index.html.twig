{% extends 'base.html.twig' %}
{% block title %}Actualités{% endblock %}
{% block body %}
<section id="blog1">
    <div>
        <p>Actualités <br> Nail'sPro</p>
    </div>
</section>
<div class="blog2">
    <div class="filter-header">
        <select class="custom-select" id="categoryFilter" onchange="filterArticles()">
            <option value="all" {{ selectedCategory == 'all' ? 'selected' : '' }}>Tous les articles</option>
            <option value="capsules" {{ selectedCategory == 'capsules' ? 'selected' : '' }}>Nouvelles Capsules</option>
            <option value="pose" {{ selectedCategory == 'pose' ? 'selected' : '' }}>Pose Américaine</option>
            <option value="soin" {{ selectedCategory == 'soin' ? 'selected' : '' }}>Soins & Beauté</option>
        </select>
    </div>
    <div class="services-grid" id="servicesGrid">
        {% if articles|length > 0 %}
            {% for article in articles %}
                <div class="card" data-category="{{ article.category }}">
                    <div class="card-image">
                        {% if article.image %}
                            <img src="{{ article.image }}" alt="{{ article.title }}">
                        {% else %}
                            <img src="https://images.unsplash.com/photo-1604654894610-df63bc536371?q=80&w=500" alt="{{ article.title }}">
                        {% endif %}
                    </div>
                    <div class="card-content">
                        <h3>{{ article.title }}</h3>
                        {% if article.excerpt %}
                            <p class="article-excerpt">{{ article.excerpt }}</p>
                        {% endif %}
                        <div class="article-meta">
                            <span class="article-date">{{ article.createdAt|date('d/m/Y') }}</span>
                            <span class="article-category">{{ article.category }}</span>
                        </div>
                        <a href="{{ path('app_reservation_new') }}" class="btn-reserver" style="background-color: #6b21a8">Réserver</a>
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <div class="no-articles">
                <p>Aucun article disponible pour le moment.</p>
            </div>
        {% endif %}
    </div>
</div>
<script>
    function filterArticles() {
        const filterSelect = document.getElementById('categoryFilter');
        const selectedValue = filterSelect.value;
        const url = new URL(window.location.href);
        url.searchParams.set('category', selectedValue);
        window.location.href = url.toString();
    }
</script>
{% endblock %}
