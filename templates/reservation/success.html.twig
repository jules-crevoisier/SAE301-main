{% extends 'base.html.twig' %}

{% block title %}Confirmation de rendez-vous{% endblock %}

{% block body %}
    <div style="max-width: 600px; margin: 50px auto; text-align: center; font-family: sans-serif;">

        <div style="font-size: 50px; color: #28a745; margin-bottom: 20px;">‚úì</div>

        <h1>Merci {{ reservation.guestFirstname }} !</h1>

        <p class="lead" style="font-size: 1.2em; color: #555;">
            Votre rendez-vous est confirm√©.
        </p>

        <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-top: 30px; text-align: left;">
            <h3 style="border-bottom: 1px solid #ddd; padding-bottom: 10px; margin-bottom: 15px;">R√©capitulatif</h3>

            <p><strong>R√©f√©rence :</strong> #{{ reservation.reference }}</p><br>

            <p><strong>üìÖ Date :</strong> {{ reservation.dateRdv|format_datetime(locale='fr', pattern='EEEE d MMMM yyyy')|capitalize }}</p>

            <p><strong>Adresse :</strong><br>
                {{ reservation.visitAddress }}</p>

            <p><strong>Prestations :</strong></p>
            <ul>
                {% for service in reservation.services %}
                    <li>{{ service.title }}</li>
                {% endfor %}
                {% if 'D√âPOSE INCLUSE' in reservation.comment %}
                    <li>Option D√©pose (+20 min)</li>
                {% endif %}
            </ul><br>

            <p style="margin-top: 20px; font-weight: bold;">
                Total √† r√©gler : {{ reservation.totalPrice }} ‚Ç¨

                {# CORRECTION ICI : On v√©rifie le statut au lieu de paymentMethod #}
                {% if reservation.status == 'CONFIRMED' %}
                    <span style="color: #28a745; font-weight: normal;">(Pay√© en ligne)</span>
                {% else %}
                    <span style="color: #b60404; font-weight: normal;"> (√Ä r√©gler sur place)</span>
                {% endif %}
            </p>
        </div>

        <div style="margin-top: 30px;">
            <a href="{{ path('app_reservation_new') }}" style="text-decoration: none; color: #d63384;">R√©server un autre soin</a>
        </div>
    </div>
{% endblock %}
