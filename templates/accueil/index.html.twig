{% extends 'base.html.twig' %}
{% block title %}Accueil{% endblock %}
{% block body %}
    <section class="hero">
        <div>
            <img id="hero" src="{{ asset('images/hero.svg') }}" alt="Image hero">
        </div>
        <a href="/reservation" data-turbo="false" class="hero-button">
            <p>Réserver ma séance</p>
        </a>
    </section>
    <section class="acc2">
        <div>
            <div></div>
            <div>
                <h1>Helloo,</h1>
                <p>”Moi c’est Klara, j’ai 23 ans et je suis passionnée par le nail art depuis 2022. J’ai créé Nail’s Pro pour offrir aux femmes un moment de beauté, de détente et de confiance… directement chez elles.”</p>
            </div>
        </div>
        <div>
            <p>Si vous habitez Troyes ou les communes voisines (La Chapelle-Saint-Luc, Saint-André-les-Vergers, Pont-Sainte-Marie, Sainte-Savine, Rosières-près-Troyes…), je viens avec plaisir prendre soin de vos mains et sublimer vos ongles selon vos envies.</p>
        </div>
    </section>
    <section class="acc3">
        <h1>Mes Services</h1>
        <div class="carousel-wrapper">
            <button class="nav-btn prev-btn" id="prevBtn" aria-label="Précédent">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg>
            </button>
            <div class="card-container">
                <div class="card" data-pos="prev">
                    <div class="card-image-wrapper">
                        <img src="{{ asset('images/NailArt.jpg') }}" alt="Nail Art">
                    </div>
                    <div class="card-content">
                        <h3>Nail Art</h3>
                        <p>Un nail art unique, créatif et personnalisé, conçu pour refléter votre univers et votre personnalité.</p>
                        <a href="{{ path('app_reservation_new') }}" class="action-btn" data-turbo="false">Réserver</a>
                    </div>
                </div>
                <div class="card" data-pos="active">
                    <div class="card-image-wrapper">
                        <img src="{{ asset('images/French.jpg') }}" alt="French Manucure">
                    </div>
                    <div class="card-content">
                        <h3>French</h3>
                        <p>Propre, élégante et intemporelle, adaptée à votre style et à toutes les occasions.</p>
                        <a href="{{ path('app_reservation_new') }}" class="action-btn" data-turbo="false">Réserver</a>
                    </div>
                </div>
                <div class="card" data-pos="next">
                    <div class="card-image-wrapper">
                        <img src="{{ asset('images/BabyBoomer.jpg') }}" alt="Baby Boomer">
                    </div>
                    <div class="card-content">
                        <h3>Baby Boomer</h3>
                        <p>Un baby boomer doux et dégradé, pour un rendu naturel, raffiné et lumineux qui sublime vos mains.</p>
                        <a href="{{ path('app_reservation_new') }}" class="action-btn" data-turbo="false">Réserver</a>
                    </div>
                </div>
            </div>
            <button class="nav-btn next-btn" id="nextBtn" aria-label="Suivant">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
            </button>
        </div>
        <script>
            const cards = document.querySelectorAll(".card");
            const prevBtn = document.getElementById("prevBtn");
            const nextBtn = document.getElementById("nextBtn");
            let currentIndex = Array.from(cards).findIndex((e) => "active" === e.getAttribute("data-pos"));
            
            function updateCarousel() {
                cards.forEach((card, index) => {
                    let pos = "hidden";
                    if (index === currentIndex) {
                        pos = "active";
                    } else if (index === getPrevIndex(currentIndex)) {
                        pos = "prev";
                    } else if (index === getNextIndex(currentIndex)) {
                        pos = "next";
                    }
                    card.setAttribute("data-pos", pos);
                    
                    // Supprimer l'ancien gestionnaire d'événement
                    card.onclick = null;
                    
                    // Ajouter un nouveau gestionnaire qui ignore les clics sur les liens
                    card.addEventListener("click", (e) => {
                        // Si le clic est sur un lien ou un bouton, ne pas changer la carte
                        if (e.target.closest("a") || e.target.closest("button")) {
                            return;
                        }
                        
                        if (pos === "prev") {
                            currentIndex = getPrevIndex(currentIndex);
                            updateCarousel();
                        } else if (pos === "next") {
                            currentIndex = getNextIndex(currentIndex);
                            updateCarousel();
                        }
                    });
                });
            }
            
            function getPrevIndex(index) {
                return index === 0 ? cards.length - 1 : index - 1;
            }
            
            function getNextIndex(index) {
                return index === cards.length - 1 ? 0 : index + 1;
            }
            
            if (currentIndex === -1) {
                currentIndex = 1;
            }
            
            prevBtn.addEventListener("click", () => {
                currentIndex = getPrevIndex(currentIndex);
                updateCarousel();
            });
            
            nextBtn.addEventListener("click", () => {
                currentIndex = getNextIndex(currentIndex);
                updateCarousel();
            });
            
            updateCarousel();
        </script>
    </section>
{% endblock %}
